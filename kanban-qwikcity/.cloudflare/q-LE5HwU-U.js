import{g as h,c as t,e as o,s as d,a as n,b as r,l as w,d as c}from"./q-CnpcmTgN.js";async function g(f,e,l,i){const s=h(f),u=await s.select().from(t).where(o(t.id,e)).get();if(!u)throw new Error(`Card ${e} not found`);const p=u.listId,a=u.position;p!==l?(await s.update(t).set({position:d`${t.position} - 1`}).where(n(o(t.listId,p),r(t.position,a+1))),await s.update(t).set({position:d`${t.position} + 1`}).where(n(o(t.listId,l),r(t.position,i))),await s.update(t).set({listId:l,position:i}).where(o(t.id,e))):(i<a?await s.update(t).set({position:d`${t.position} + 1`}).where(n(o(t.listId,p),r(t.position,i),w(t.position,a))):i>a&&await s.update(t).set({position:d`${t.position} - 1`}).where(n(o(t.listId,p),r(t.position,a+1),c(t.position,i))),await s.update(t).set({position:i}).where(o(t.id,e)))}export{g as updateCardListAndPosition};
