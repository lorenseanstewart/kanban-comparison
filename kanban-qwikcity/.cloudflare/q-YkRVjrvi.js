import{d as s,c as t,e as o,s as d,a as n,g as r,l as f,b as h}from"./q-CCpY0jAd.js";async function c(e,l,i){const u=await s.select().from(t).where(o(t.id,e)).get();if(!u)throw new Error(`Card ${e} not found`);const p=u.listId,a=u.position;p!==l?(await s.update(t).set({position:d`${t.position} - 1`}).where(n(o(t.listId,p),r(t.position,a+1))),await s.update(t).set({position:d`${t.position} + 1`}).where(n(o(t.listId,l),r(t.position,i))),await s.update(t).set({listId:l,position:i}).where(o(t.id,e))):(i<a?await s.update(t).set({position:d`${t.position} + 1`}).where(n(o(t.listId,p),r(t.position,i),f(t.position,a))):i>a&&await s.update(t).set({position:d`${t.position} - 1`}).where(n(o(t.listId,p),r(t.position,a+1),h(t.position,i))),await s.update(t).set({position:i}).where(o(t.id,e)))}export{c as updateCardListAndPosition};
